{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst objectsLinks = {\n  dateInput: document.querySelector('#datetime-picker'),\n  startBtn: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate = null;\nlet timerId = null;\nrefs.startBtn.disabled = true;\n\nflatpickr(refs.dateInput, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    refs.startBtn.disabled = userSelectedDate <= new Date();\n    if (refs.startBtn.disabled) {\n      iziToast.error({ message: 'Please choose a date in the future' });\n    } else {\n      console.log('Выбранная дата:', formatDate(userSelectedDate));\n    }\n  },\n});\n\nrefs.startBtn.addEventListener('click', () => {\n  refs.startBtn.disabled = true;\n  refs.dateInput.disabled = true;\n  updateTimer();\n  timerId = setInterval(updateTimer, 1000);\n});\n\nfunction updateTimer() {\n  const timeLeft = userSelectedDate - new Date();\n  if (timeLeft <= 0) {\n    clearInterval(timerId);\n    refs.dateInput.disabled = false;\n    setTimerDisplay(0, 0, 0, 0);\n    return;\n  }\n  const { days, hours, minutes, seconds } = convertMs(timeLeft);\n  setTimerDisplay(days, hours, minutes, seconds);\n}\n\nfunction setTimerDisplay(days, hours, minutes, seconds) {\n  Object.assign(refs, {\n    days: (refs.days.textContent = addLeadingZero(days)),\n    hours: (refs.hours.textContent = addLeadingZero(hours)),\n    minutes: (refs.minutes.textContent = addLeadingZero(minutes)),\n    seconds: (refs.seconds.textContent = addLeadingZero(seconds)),\n  });\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction formatDate(date) {\n  return date\n    .toLocaleString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n    })\n    .replace(',', ' часы');\n}\n\nfunction convertMs(ms) {\n  const second = 1000,\n    minute = second * 60,\n    hour = minute * 60,\n    day = hour * 24;\n  return {\n    days: Math.floor(ms / day),\n    hours: Math.floor((ms % day) / hour),\n    minutes: Math.floor((ms % hour) / minute),\n    seconds: Math.floor((ms % minute) / second),\n  };\n}\n"],"names":["userSelectedDate","timerId","flatpickr","selectedDates","iziToast","formatDate","updateTimer","timeLeft","setTimerDisplay","days","hours","minutes","seconds","convertMs","addLeadingZero","value","date","ms"],"mappings":"gJAMa,SAAS,cAAc,kBAAkB,EAC1C,SAAS,cAAc,cAAc,EACzC,SAAS,cAAc,aAAa,EACnC,SAAS,cAAc,cAAc,EACnC,SAAS,cAAc,gBAAgB,EACvC,SAAS,cAAc,gBAAgB,EAGlD,IAAIA,EAAmB,KACnBC,EAAU,KACd,KAAK,SAAS,SAAW,GAEzBC,EAAU,KAAK,UAAW,CACxB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAClC,KAAK,SAAS,SAAWH,GAAoB,IAAI,KAC7C,KAAK,SAAS,SAChBI,EAAS,MAAM,CAAE,QAAS,oCAAsC,CAAA,EAEhE,QAAQ,IAAI,kBAAmBC,EAAWL,CAAgB,CAAC,CAE9D,CACH,CAAC,EAED,KAAK,SAAS,iBAAiB,QAAS,IAAM,CAC5C,KAAK,SAAS,SAAW,GACzB,KAAK,UAAU,SAAW,GAC1BM,IACAL,EAAU,YAAYK,EAAa,GAAI,CACzC,CAAC,EAED,SAASA,GAAc,CACrB,MAAMC,EAAWP,EAAmB,IAAI,KACxC,GAAIO,GAAY,EAAG,CACjB,cAAcN,CAAO,EACrB,KAAK,UAAU,SAAW,GAC1BO,EAAgB,EAAG,EAAG,EAAG,CAAC,EAC1B,MACD,CACD,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAQ,EAC5DC,EAAgBC,EAAMC,EAAOC,EAASC,CAAO,CAC/C,CAEA,SAASJ,EAAgBC,EAAMC,EAAOC,EAASC,EAAS,CACtD,OAAO,OAAO,KAAM,CAClB,KAAO,KAAK,KAAK,YAAcE,EAAeL,CAAI,EAClD,MAAQ,KAAK,MAAM,YAAcK,EAAeJ,CAAK,EACrD,QAAU,KAAK,QAAQ,YAAcI,EAAeH,CAAO,EAC3D,QAAU,KAAK,QAAQ,YAAcG,EAAeF,CAAO,CAC/D,CAAG,CACH,CAEA,SAASE,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASV,EAAWW,EAAM,CACxB,OAAOA,EACJ,eAAe,QAAS,CACvB,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,UACR,OAAQ,EACd,CAAK,EACA,QAAQ,IAAK,OAAO,CACzB,CAEA,SAASH,EAAUI,EAAI,CAKrB,MAAO,CACL,KAAM,KAAK,MAAMA,EAAK,KAAG,EACzB,MAAO,KAAK,MAAOA,EAAK,MAAO,IAAI,EACnC,QAAS,KAAK,MAAOA,EAAK,KAAQ,GAAM,EACxC,QAAS,KAAK,MAAOA,EAAK,IAAU,GAAM,CAC9C,CACA"}